---
import type { SkillGroup } from '../data/skills';
import SkillPill from './SkillPill.astro';

interface Props {
	title: string;
	icon: string;
	skills?: string[];
	groups?: SkillGroup[];
	class?: string;
}

const { title, icon, skills, groups, class: className } = Astro.props;
---

<article
	class:list={[
		'group relative h-full overflow-hidden rounded-xl border border-border p-6 transition-colors hover:border-muted-foreground/60 hover:bg-accent/50',
		className,
	]}
>
	<!-- Decorative glow -->
	<div
		class="pointer-events-none absolute -top-24 -right-24 h-48 w-48 rounded-full bg-[radial-gradient(circle,var(--color-muted-foreground)_0%,transparent_70%)] opacity-[0.04] transition-all duration-500 ease-out group-hover:h-64 group-hover:w-64 group-hover:opacity-[0.08]"
		aria-hidden="true"
	>
	</div>

	<!-- Header -->
	<div class="mb-4 flex items-center gap-2">
		<svg
			xmlns="http://www.w3.org/2000/svg"
			fill="none"
			viewBox="0 0 24 24"
			stroke-width="1.5"
			stroke="currentColor"
			class="size-5 text-muted-foreground"
			aria-hidden="true"
		>
			<path stroke-linecap="round" stroke-linejoin="round" d={icon}></path>
		</svg>
		<h3
			class="font-mono text-xs font-medium uppercase tracking-wider text-muted-foreground"
		>
			{title}
		</h3>
	</div>

	<!-- Separator -->
	<hr class="mb-4 border-dashed border-border" />

	<!-- Grouped skills (language â†’ frameworks) -->
	{
		groups && (
			<div class="space-y-3">
				{groups.map((group) => (
					<div>
						<span class="font-mono text-sm font-medium text-foreground">
							{group.language}
						</span>
						<div class="mt-1.5 flex flex-wrap gap-2">
							{group.frameworks.map((fw) => (
								<SkillPill name={fw} />
							))}
						</div>
					</div>
				))}
			</div>
		)
	}

	<!-- Flat skills list -->
	{
		skills && (
			<div class="flex flex-wrap gap-2">
				{skills.map((skill) => (
					<SkillPill name={skill} />
				))}
			</div>
		)
	}
</article>
