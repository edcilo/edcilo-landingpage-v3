---
interface Props {
	label: string;
}

const { label } = Astro.props;
---

<span
	class="badge relative inline-flex items-center gap-2 overflow-hidden rounded-full border border-border bg-muted px-4 py-1.5 text-xs font-medium uppercase tracking-wider font-mono text-muted-foreground"
>
	<span class="badge-dot size-2 rounded-full" aria-hidden="true"></span>
	{label}
</span>

<style>
	.badge {
		--sweep-color: rgba(200, 215, 235, 0.25);
	}

	:global(.dark) .badge {
		--sweep-color: rgba(255, 255, 255, 0.2);
	}

	.badge::after {
		content: '';
		position: absolute;
		inset: 0;
		background: linear-gradient(
			90deg,
			transparent 0%,
			var(--sweep-color) 40%,
			var(--sweep-color) 60%,
			transparent 100%
		);
		transform: translateX(-100%);
		animation: badge-sweep 1s ease-in-out 1s forwards;
		pointer-events: none;
	}

	@keyframes badge-sweep {
		0% {
			transform: translateX(-100%);
			opacity: 1;
		}
		70% {
			opacity: 1;
		}
		100% {
			transform: translateX(100%);
			opacity: 0;
		}
	}

	.badge-dot {
		position: relative;
		z-index: 1;
		background-color: var(--color-muted-foreground);
		opacity: 0.4;
		animation: dot-activate 0.8s ease-out 1s forwards;
	}

	@keyframes dot-activate {
		to {
			background-color: #10b981;
			opacity: 1;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.badge::after {
			animation: none;
			display: none;
		}

		.badge-dot {
			background-color: #10b981;
			opacity: 1;
			animation: none;
		}
	}
</style>
